<html>
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Form Validation</title>
  <style>
    tbody,
    td {
      border: 2px solid rgba(128, 128, 128, 0.29);
    }
    table {
      width: 50vw;
      padding-left: 10;
      margin-left: 15px;
      margin-right: 15px;
    }
    thead {
      font-size: larger;
    }
    body {
      background-color: #1a202c;
    }
  </style>
  <body>
    <div class="flex justify-center">
      <div id="res"></div>
      <form
        id="user-form"
        onsubmit="submitListener(event)"
        class="p-5 rounded-lg bg-gray-800 shadow-2xl mt-20 font-bold text-white border-2 border-white"
      >
        <label for="name" class="text-xl mr-20">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Enter your name"
          class="border border-gray-500 bg-gray-500 bg-opacity-40 focus:border-blue-500 focus:bg-gray-900 focus:ring-2 focus:ring-blue-900 text-base outline-none rounded-lg py-1 px-3 m-5 shadow-md"
          required
        /><br />

        <label for="email" class="text-xl mr-20">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Enter your email"
          class="border border-gray-500 bg-gray-500 bg-opacity-40 focus:border-blue-500 focus:bg-gray-900 focus:ring-2 focus:ring-blue-900 text-base outline-none rounded-lg m-5 py-1 px-3 shadow-md"
          required
        /><br />

        <label for="password" class="text-xl mr-12">Password</label>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Enter your password"
          class="border border-gray-500 bg-gray-500 bg-opacity-40 focus:border-blue-500 focus:bg-gray-900 focus:ring-2 focus:ring-blue-900 text-base outline-none rounded-lg m-5 py-1 px-3 shadow-md"
          required
        /><br />

        <label for="dob" class="text-xl mr-4">Date of Birth</label>
        <input
          type="date"
          id="dob"
          min="1968-02-09"
          max="2005-02-09"
          class="border border-gray-500 bg-gray-500 bg-opacity-40 focus:border-blue-500 focus:bg-gray-900 focus:ring-2 focus:ring-blue-900 text-base outline-none rounded-lg m-5 py-1 px-3 shadow-md"
          required
        />
        <br />
        <input
          type="checkbox"
          id="acceptTerms"
          name="acceptTerms"
          class="my-3 mx-3 mb-6 shadow-md"
          required
        />
        <label for="acceptTerms">Accept Terms & Conditions</label><br />

        <button
          type="submit"
          class="bg-blue-500 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-full"
        >
          Submit
        </button>
      </form>
    </div>
    <div
      class="flex flex-col absolute place-items-center border-2 bg-gray-800 text-white rounded-lg border-gray-100 mt-20 shadow-2xl"
      style="margin-left: 25%"
    >
      <div class="">
        <p class="text-3xl font-bold mt-10 mb-10">Entries</p>
      </div>
      <div class="flex flex-col">
        <table class="table-auto relative text-white">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Password</th>
              <th>Dob</th>
              <th>Accepted terms?</th>
            </tr>
          </thead>
          <tbody id="showData"></tbody>
        </table>
      </div>
    </div>
  </body>
  <script type="text/javascript">
    //date picker restriction
    const dob2 = document.getElementById("dob");
    const today = new Date().toISOString().slice(4, 10);

    const year = new Date().getFullYear();

    dob2.min = `${year - 55}${today}`;
    dob2.max = `${year - 18}${today}`;

    let UserEntries = [];
    let flag = true;

    function submitListener(event) {
      event.preventDefault();
      document.getElementById("showData").innerHTML = "";
      var name = document.getElementById("name").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var dob = document.getElementById("dob").value;
      var acceptTerms = document.getElementById("acceptTerms").checked;

      var entries = {
        name,
        email,
        password,
        dob,
        acceptTerms,
      };
      if (flag) {
        var users = [];
        users = JSON.parse(localStorage.getItem("user-entries")) || [];
        for (var i = 0; i < users.length; i++) {
          UserEntries.push(users[i]);
        }
        flag = false;
      }
      UserEntries.push(entries);
      localStorage.setItem("user-entries", JSON.stringify(UserEntries));
      showData();
    }
    function showData() {
      var users = JSON.parse(localStorage.getItem("user-entries")) || [];
      for (var i = 0; i < users.length; i++) {
        let res = `<tr>
        <td class="py-3 px-2">${users[i].name}</td>
        <td class="py-3 px-2">${users[i].email}</td>
        <td class="py-3 px-2">${users[i].password}</td>
        <td class="py-3 px-2">${users[i].dob}</td>
        <td class="py-3 px-2">${users[i].acceptTerms}</td>
      </tr>`;
        document.getElementById("showData").innerHTML += res;
      }
    }
    showData();
  </script>
</html>
